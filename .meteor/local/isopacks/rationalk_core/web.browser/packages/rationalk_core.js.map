{"version":3,"sources":["rationalk:core/lib/methods.js","rationalk:core/lib/routes.js","rationalk:core/lib/client/templates/accessDenied.html","rationalk:core/lib/client/templates/externalLayout.html","rationalk:core/lib/client/templates/footer.html","rationalk:core/lib/client/templates/header.html","rationalk:core/lib/client/templates/headerExternal.html","rationalk:core/lib/client/templates/layout.html","rationalk:core/lib/client/templates/layout.js","rationalk:core/lib/client/templates/loginLayout.html","rationalk:core/lib/client/templates/loginLayout.js","rationalk:core/lib/client/templates/nav.html","rationalk:core/lib/client/templates/nav.js","rationalk:core/lib/client/templates/navExternal.html","rationalk:core/lib/client/templates/navExternal.js","rationalk:core/lib/client/templates/printLayout.html"],"names":[],"mappings":";;;;;;;;AAAA,Y;AACA,wE;AACA,kF;AACA,gF;AACA,8E;AACA,iC;AACA,yC;AACA,6B;;AAEA,8B;AACA,qC;AACA,sB;AACA,G;AACA,E;;;;;;;;;;;;;;;;;;;ACbA,4B;AACA,2B;AACA,iC;AACA,W;AACA,G;AACA,sC;AACA,gB;AACA,W;AACA,G;AACA,0C;AACA,gB;AACA,W;AACA,G;AACA,oC;AACA,gB;AACA,W;AACA,G;AACA,uC;AACA,gB;AACA,W;AACA,G;AACA,yB;AACA,+B;AACA,kB;AACA,W;AACA,G;AACA,c;AACA,E;;AAEA,mC;AACA,c;AACA,G;;AAEA,oC;;AAEA,mB;AACA,oB;AACA,uB;AACA,Y;AACA,gC;AACA,+B;AACA,8E;AACA,kC;AACA,oC;AACA,qC;AACA,kC;AACA,Q;AACA,I;AACA,a;AACA,mB;AACA,I;AACA,G;;AAEA,kB;AACA,2B;AACA,6B;AACA,uB;AACA,yC;AACA,I;AACA,G;;AAEA,wB;AACA,gC;AACA,qB;AACA,2C;AACA,wB;AACA,I;AACA,uB;AACA,Y;AACA,oC;AACA,mC;AACA,kC;AACA,M;AACA,I;AACA,G;;AAEA,gC;AACA,iC;AACA,G;;;AAGA,wC;AACA,wB;AACA,uB;AACA,Y;;AAEA,M;AACA,I;AACA,G;;AAEA,8B;AACA,qB;AACA,uB;AACA,0C;AACA,I;AACA,G;;AAEA,uB;AACA,uB;AACA,Y;AACA,+B;AACA,+B;AACA,M;AACA,I;AACA,G;;AAEA,oC;AACA,sB;AACA,qB;AACA,iD;AACA,I;AACA,uB;AACA,0C;AACA,I;AACA,G;;AAEA,2B;AACA,sB;AACA,uB;AACA,0C;AACA,I;AACA,G;;AAEA,yB;AACA,iB;AACA,uB;AACA,Y;AACA,iC;AACA,M;AACA,I;AACA,G;;AAEA,0B;AACA,kB;AACA,uB;AACA,Y;AACA,kC;AACA,qC;AACA,M;AACA,I;AACA,G;;;;AAIA,6B;AACA,oB;AACA,uB;AACA,Y;AACA,kC;AACA,M;AACA,I;AACA,G;;AAEA,mC;AACA,qB;AACA,qB;AACA,uC;AACA,2B;AACA,O;AACA,I;AACA,uB;AACA,Y;AACA,kD;AACA,qC;AACA,M;AACA,I;AACA,G;;AAEA,4B;AACA,kB;AACA,uB;AACA,uC;AACA,I;AACA,G;;AAEA,iC;AACA,mB;AACA,qB;AACA,8B;AACA,qB;AACA,O;AACA,I;AACA,uB;AACA,kB;AACA,kC;AACA,6C;AACA,I;AACA,G;;AAEA,wB;AACA,mB;AACA,uB;AACA,Y;AACA,gC;AACA,M;AACA,I;AACA,G;;AAEA,4B;AACA,oB;AACA,uB;AACA,2C;AACA,I;AACA,G;;AAEA,sB;AACA,c;AACA,uB;AACA,Y;AACA,mC;AACA,M;AACA,I;AACA,G;;;AAGA,8C;AACA,gC;AACA,wB;AACA,yB;AACA,+C;AACA,M;AACA,K;;AAEA,8C;AACA,qB;AACA,kC;AACA,yB;AACA,+C;AACA,M;AACA,K;;AAEA,kD;AACA,yB;AACA,kC;AACA,yB;AACA,+C;AACA,M;AACA,K;AACA,C;;AAEA,2C;AACA,2B;AACA,uB;AACA,kB;AACA,iC;AACA,Y;AACA,qC;AACA,qC;AACA,M;AACA,I;AACA,G;;AAEA,4C;AACA,8B;AACA,sB;AACA,yB;AACA,c;AACA,sC;AACA,uC;AACA,Q;AACA,M;AACA,K;;AAEA,qC;AACA,6B;AACA,yB;AACA,oD;AACA,M;AACA,K;;AAEA,iC;AACA,oB;AACA,uB;AACA,gD;AACA,M;AACA,yB;AACA,kG;AACA,M;AACA,K;;AAEA,iE;AACA,mC;AACA,uB;AACA,sD;AACA,M;AACA,yB;AACA,c;AACA,2D;AACA,6C;AACA,iC;AACA,sC;AACA,uC;AACA,0C;AACA,kC;AACA,wC;AACA,qC;AACA,oC;AACA,wC;AACA,oC;AACA,Q;AACA,M;AACA,K;AACA,C;;AAEA,yC;AACA,2B;AACA,mB;AACA,yB;AACA,c;AACA,mC;AACA,Q;AACA,M;AACA,K;;AAEA,+B;AACA,kB;AACA,uB;AACA,6C;AACA,M;AACA,yB;AACA,c;AACA,oD;AACA,S;AACA,M;AACA,K;AACA,C;;AAEA,iC;AACA,oB;AACA,uB;AACA,Y;AACA,qC;AACA,M;AACA,I;AACA,G;;AAEA,iC;AACA,oB;AACA,uB;AACA,Y;AACA,qC;AACA,+B;AACA,M;AACA,I;AACA,G;;AAEA,8B;AACA,sB;AACA,uB;AACA,Y;;AAEA,M;AACA,I;AACA,G;;AAEA,gC;AACA,kB;AACA,+B;AACA,0D;AACA,kF;AACA,kC;AACA,K;AACA,U;AACA,kB;AACA,K;AACA,I;AACA,qB;AACA,yC;AACA,I;AACA,uB;AACA,kB;AACA,iC;AACA,Y;AACA,qC;AACA,2C;AACA,6C;AACA,gD;AACA,2D;AACA,yC;AACA,qC;AACA,kC;AACA,iD;AACA,M;AACA,I;AACA,G;;AAEA,qC;AACA,uB;AACA,qB;AACA,8C;AACA,I;AACA,uB;AACA,kB;AACA,sC;AACA,Y;AACA,qC;AACA,sC;AACA,kC;AACA,2C;AACA,0C;AACA,yC;AACA,kC;AACA,M;AACA,I;AACA,G;;AAEA,6B;AACA,oB;AACA,sB;AACA,+B;AACA,0D;AACA,kF;AACA,kC;AACA,K;AACA,U;AACA,kB;AACA,K;AACA,I;AACA,qB;AACA,Y;AACA,kD;AACA,M;AACA,I;AACA,uB;AACA,Y;AACA,+B;AACA,gC;AACA,kC;AACA,qC;AACA,yC;AACA,qC;AACA,M;AACA,I;AACA,G;;AAEA,iC;AACA,sB;AACA,uB;AACA,uE;AACA,I;AACA,G;;AAEA,qC;AACA,uB;AACA,qB;AACA,+C;AACA,I;AACA,uB;AACA,kB;AACA,sC;AACA,Y;AACA,2C;AACA,sC;AACA,qC;AACA,M;AACA,I;AACA,G;;AAEA,6B;AACA,uB;AACA,uB;AACA,Y;AACA,qC;AACA,gC;AACA,M;AACA,I;AACA,G;;AAEA,2C;AACA,qB;AACA,yB;AACA,qB;AACA,iE;AACA,I;AACA,uB;AACA,mG;AACA,I;AACA,G;;AAEA,mC;AACA,oB;AACA,wB;AACA,uB;AACA,6H;AACA,I;AACA,G;;AAEA,wC;AACA,iB;AACA,qB;AACA,oC;AACA,I;AACA,uB;AACA,Y;AACA,kC;AACA,qC;AACA,gC;AACA,+B;AACA,kC;AACA,oC;AACA,M;AACA,I;AACA,G;;AAEA,uB;AACA,e;AACA,uB;AACA,Y;AACA,kC;AACA,M;AACA,I;AACA,G;;AAEA,wC;AACA,yB;AACA,C;;AAEA,uB;AACA,uB;AACA,Y;AACA,wC;AACA,qC;AACA,mC;AACA,M;AACA,I;AACA,G;;AAEA,wB;AACA,gB;AACA,uB;AACA,Y;AACA,sC;AACA,mC;AACA,M;AACA,I;AACA,G;;AAEA,2B;AACA,mB;AACA,uB;AACA,c;AACA,I;AACA,G;;AAEA,yB;AACA,iB;AACA,uB;AACA,Y;AACA,kC;AACA,M;AACA,I;AACA,G;;AAEA,2B;AACA,mB;AACA,uB;AACA,0C;AACA,I;AACA,G;;AAEA,gD;AACA,kC;AACA,0B;AACA,yB;AACA,gB;AACA,M;AACA,K;AACA,C;;AAEA,yB;AACA,oB;AACA,uB;AACA,0B;AACA,oC;AACA,qC;AACA,+C;AACA,gC;AACA,+B;AACA,kC;AACA,mC;AACA,kC;AACA,qC;AACA,M;;AAEA,qE;;AAEA,gG;AACA,6C;AACA,2C;AACA,+E;AACA,yC;AACA,iE;AACA,O;;;AAGA,yE;AACA,+C;AACA,6C;AACA,iF;AACA,yC;AACA,mE;AACA,O;;AAEA,qH;;AAEA,kC;AACA,yC;AACA,kC;AACA,2D;AACA,S;AACA,O;AACA,K;;AAEA,yB;AACA,I;AACA,G;;;AAGA,wB;AACA,gB;AACA,uB;AACA,Y;AACA,qC;AACA,+B;AACA,kC;AACA,oC;AACA,wC;AACA,kC;AACA,+B;AACA,M;AACA,I;AACA,G;;AAEA,sC;AACA,6B;AACA,uB;AACA,gD;AACA,I;AACA,G;;AAEA,2B;AACA,2B;AACA,uB;AACA,Y;AACA,qC;AACA,qE;AACA,M;AACA,I;AACA,G;;;;;;;;;;;;;;;;;;;;ACvoBA,qC;AACA,8E;AACA,kB;AACA,mB;AACA,kB;AACA,uB;AACA,wB;AACA,yB;AACA,kC;AACA,4B;AACA,6B;AACA,8B;AACA,4B;AACA,0B;AACA,wC;AACA,iE;AACA,8C;AACA,yB;AACA,iE;AACA,iE;AACA,qD;AACA,I;;;;;;;;;;;;;;;;;;;;ACrBA,uC;AACA,kF;AACA,kB;AACA,mB;AACA,8B;AACA,mG;AACA,e;AACA,wB;AACA,yF;AACA,I;;;;;;;;;;;;;;;;;;;;ACTA,+B;AACA,kE;AACA,kB;AACA,+X;AACA,I;;;;;;;;;;;;;;;;;;;;ACJA,+B;AACA,kE;AACA,kB;AACA,uD;AACA,I;;;;;;;;;;;;;;;;;;;;ACJA,uC;AACA,kF;AACA,kB;AACA,+D;AACA,I;;;;;;;;;;;;;;;;;;;;ACJA,+B;AACA,kE;AACA,kB;AACA,mB;AACA,8B;AACA,6F;AACA,e;AACA,wB;AACA,sH;AACA,iE;AACA,iB;AACA,oD;AACA,wD;AACA,mB;AACA,sG;AACA,uB;AACA,gB;AACA,I;;;;;;;;;;;;;;;;;;;AClBA,yB;AACA,6B;AACA,wC;AACA,G;AACA,4B;AACA,8C;AACA,I;AACA,G;;;;;;;;;;;;;;;;;;;;ACNA,oC;AACA,4E;AACA,kB;AACA,mB;AACA,wB;AACA,6B;AACA,kB;AACA,+B;AACA,wB;AACA,iC;AACA,kC;AACA,mC;AACA,yB;AACA,yF;AACA,iF;AACA,4oB;AACA,kB;AACA,8B;AACA,wB;AACA,kC;AACA,kC;AACA,gC;AACA,yB;AACA,kC;AACA,sB;AACA,kD;AACA,iD;AACA,iB;AACA,+C;AACA,2B;AACA,oQ;AACA,gC;AACA,yB;AACA,uM;AACA,yB;AACA,wC;AACA,sE;AACA,kD;AACA,yB;AACA,kC;AACA,6B;AACA,wC;AACA,4D;AACA,yI;AACA,yB;AACA,wC;AACA,yE;AACA,mD;AACA,mB;AACA,+B;AACA,wB;AACA,wC;AACA,2D;AACA,+B;AACA,c;AACA,6B;AACA,wC;AACA,gF;AACA,4H;AACA,qD;AACA,iB;AACA,qC;AACA,mB;AACA,0B;AACA,mC;AACA,oC;AACA,uC;AACA,2B;AACA,mD;AACA,qB;AACA,c;AACA,gJ;AACA,gB;AACA,I;;;;;;;;;;;;;;;;;;;AC1EA,6B;AACA,wC;AACA,uB;AACA,0D;AACA,gB;AACA,M;AACA,8C;AACA,uB;AACA,8C;AACA,iB;AACA,2B;AACA,uB;AACA,6B;AACA,sD;AACA,4C;AACA,gE;AACA,6C;AACA,mD;AACA,yF;AACA,e;AACA,a;AACA,W;AACA,gB;AACA,iD;AACA,kE;AACA,a;AACA,W;AACA,W;AACA,O;AACA,Y;AACA,6C;AACA,2C;AACA,S;AACA,O;AACA,iB;AACA,M;AACA,6C;AACA,qB;AACA,oC;AACA,6C;AACA,wD;AACA,gD;;AAEA,8C;AACA,kC;AACA,0B;AACA,kE;AACA,4C;AACA,8D;AACA,c;AACA,gE;AACA,wD;AACA,mC;AACA,6C;AACA,sD;AACA,O;;AAEA,Q;AACA,S;AACA,M;AACA,sC;AACA,M;;;AAGA,S;AACA,sB;AACA,O;AACA,G;;;AAGA,8B;AACA,sB;AACA,uD;AACA,gB;AACA,G;AACA,Q;AACA,e;AACA,G;AACA,G;AACA,0B;AACA,+C;AACA,G;AACA,+B;AACA,kD;AACA,sD;AACA,2B;AACA,sB;AACA,2B;AACA,G;AACA,G;;;AAGA,6C;AACA,wC;AACA,4C;AACA,+C;AACA,U;AACA,E;;;;;;;;;;;;;;;;;;;;AChGA,4B;AACA,4D;AACA,kB;AACA,yD;AACA,2D;AACA,uB;AACA,oC;AACA,uB;AACA,8B;AACA,wB;AACA,4B;AACA,sa;AACA,4B;AACA,sB;AACA,qE;AACA,M;AACA,uB;AACA,+D;AACA,K;AACA,iD;AACA,yD;AACA,qJ;AACA,iB;AACA,uC;AACA,qC;AACA,mD;AACA,iB;AACA,kC;AACA,+B;AACA,2C;AACA,wB;AACA,uE;AACA,Q;AACA,yB;AACA,8D;AACA,O;AACA,wC;AACA,2C;AACA,iD;AACA,4D;AACA,wC;AACA,yB;AACA,0C;AACA,gB;AACA,iC;AACA,gC;AACA,qB;AACA,6B;AACA,8B;AACA,wC;AACA,iD;AACA,wD;AACA,wB;AACA,sB;AACA,6C;AACA,+B;AACA,kB;AACA,mD;AACA,2B;AACA,8E;AACA,Q;AACA,wB;AACA,uE;AACA,Q;AACA,yB;AACA,uE;AACA,O;AACA,0C;AACA,qE;AACA,sD;AACA,wB;AACA,oE;AACA,Q;AACA,yB;AACA,qE;AACA,O;AACA,0C;AACA,mE;AACA,iD;AACA,0E;AACA,mB;AACA,mD;AACA,0B;AACA,6E;AACA,U;AACA,iC;AACA,kD;AACA,+C;AACA,uD;AACA,mB;AACA,0C;AACA,0B;AACA,6C;AACA,kC;AACA,4C;AACA,kE;AACA,oD;AACA,yD;AACA,qB;AACA,2D;AACA,4B;AACA,sF;AACA,mE;AACA,gB;AACA,Y;AACA,oC;AACA,0D;AACA,Y;AACA,mC;AACA,2D;AACA,Y;AACA,mC;AACA,iD;AACA,yD;AACA,iC;AACA,6B;AACA,+F;AACA,mE;AACA,mB;AACA,6C;AACA,0B;AACA,sE;AACA,U;AACA,uB;AACA,oC;AACA,2C;AACA,qE;AACA,mB;AACA,6C;AACA,0B;AACA,wE;AACA,U;AACA,0B;AACA,uC;AACA,+B;AACA,yB;AACA,8B;AACA,gB;AACA,iC;AACA,gC;AACA,qB;AACA,8B;AACA,+B;AACA,sB;AACA,iC;AACA,+B;AACA,kB;AACA,8C;AACA,wD;AACA,mB;AACA,0E;AACA,2D;AACA,2B;AACA,0E;AACA,sE;AACA,mB;AACA,kD;AACA,0B;AACA,yE;AACA,U;AACA,0B;AACA,mB;AACA,uB;AACA,oD;AACA,4C;AACA,2C;AACA,wE;AACA,mB;AACA,6C;AACA,0B;AACA,2E;AACA,U;AACA,6B;AACA,0C;AACA,mD;AACA,oD;AACA,mB;AACA,+C;AACA,2B;AACA,4C;AACA,kB;AACA,mC;AACA,kC;AACA,uB;AACA,gC;AACA,4C;AACA,8D;AACA,0B;AACA,wB;AACA,+C;AACA,iC;AACA,oB;AACA,qD;AACA,0B;AACA,4E;AACA,U;AACA,2B;AACA,2E;AACA,S;AACA,4C;AACA,kE;AACA,wD;AACA,0B;AACA,uE;AACA,U;AACA,2B;AACA,wE;AACA,S;AACA,4C;AACA,+D;AACA,wD;AACA,0B;AACA,kF;AACA,U;AACA,2B;AACA,gF;AACA,S;AACA,4C;AACA,8E;AACA,wD;AACA,0B;AACA,wE;AACA,U;AACA,uC;AACA,4C;AACA,8E;AACA,wD;AACA,0B;AACA,yE;AACA,U;AACA,2B;AACA,gE;AACA,S;AACA,4C;AACA,8D;AACA,wD;AACA,0B;AACA,yE;AACA,U;AACA,2B;AACA,gE;AACA,S;AACA,4C;AACA,8D;AACA,wD;AACA,0B;AACA,qE;AACA,U;AACA,2B;AACA,oE;AACA,S;AACA,4C;AACA,kE;AACA,wD;AACA,0B;AACA,gF;AACA,U;AACA,2B;AACA,kE;AACA,S;AACA,4C;AACA,gE;AACA,qO;AACA,oE;AACA,qB;AACA,6D;AACA,4B;AACA,uE;AACA,Y;AACA,6B;AACA,iE;AACA,W;AACA,8C;AACA,+D;AACA,2C;AACA,mF;AACA,sC;AACA,qF;AACA,2D;AACA,iB;AACA,kF;AACA,iB;AACA,uC;AACA,4C;AACA,8C;AACA,mD;AACA,mB;AACA,wG;AACA,0B;AACA,8B;AACA,mD;AACA,2D;AACA,4B;AACA,uB;AACA,gC;AACA,2B;AACA,4C;AACA,+D;AACA,+B;AACA,mB;AACA,2G;AACA,2B;AACA,iE;AACA,U;AACA,0B;AACA,iB;AACA,oB;AACA,+C;AACA,6B;AACA,kC;AACA,uC;AACA,iH;AACA,I;;;;;;;;;;;;;;;;;;;ACzTA,qC;AACA,kI;;AAEA,qC;AACA,0B;AACA,K;;AAEA,6C;AACA,uC;AACA,wD;AACA,kB;AACA,sB;AACA,2C;AACA,M;AACA,O;AACA,O;AACA,G;;AAEA,6C;AACA,sC;AACA,uE;AACA,sB;AACA,0B;AACA,4B;AACA,uC;AACA,oD;AACA,yC;AACA,uB;AACA,yB;AACA,yC;AACA,iE;AACA,qB;AACA,6C;AACA,+D;AACA,gB;AACA,Q;AACA,S;AACA,O;AACA,gC;AACA,mB;AACA,M;AACA,K;AACA,wB;AACA,E;;AAEA,sB;AACA,sB;AACA,2E;AACA,G;AACA,4B;AACA,qE;AACA,gE;AACA,yD;AACA,mD;AACA,M;AACA,W;AACA,iC;AACA,2B;AACA,M;AACA,I;AACA,S;AACA,+B;AACA,0B;AACA,I;AACA,G;AACA,gC;AACA,6D;AACA,8E;AACA,iB;AACA,I;AACA,e;AACA,G;AACA,wB;AACA,yB;AACA,I;AACA,2B;AACA,4B;AACA,G;AACA,wB;AACA,gC;AACA,G;AACA,2B;AACA,8C;AACA,I;AACA,uC;AACA,kC;AACA,I;AACA,0B;AACA,yH;AACA,G;AACA,0B;AACA,mC;AACA,G;AACA,G;;AAEA,qB;AACA,sC;AACA,qB;AACA,mB;AACA,gB;AACA,G;AACA,iC;AACA,qB;AACA,mB;AACA,gB;AACA,G;AACA,yC;AACA,qB;AACA,kE;AACA,4E;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;;;AC9GA,oC;AACA,4E;AACA,kB;AACA,mB;AACA,oC;AACA,uB;AACA,8B;AACA,wB;AACA,4B;AACA,sd;AACA,yD;AACA,uE;AACA,I;;;;;;;;;;;;;;;;;;;ACbA,6C;AACA,8H;AACA,E;;AAEA,8B;AACA,sB;AACA,uD;AACA,gB;AACA,G;AACA,Q;AACA,e;AACA,G;AACA,G;AACA,4B;AACA,qE;AACA,gE;AACA,yD;AACA,mD;AACA,M;AACA,W;AACA,iC;AACA,2B;AACA,M;AACA,I;AACA,S;AACA,+B;AACA,0B;AACA,I;AACA,G;AACA,iC;AACA,2D;AACA,uC;AACA,iB;AACA,I;AACA,S;AACA,8E;AACA,gB;AACA,I;AACA,G;AACA,wB;AACA,yB;AACA,I;AACA,uB;AACA,gC;AACA,G;AACA,yB;AACA,qH;AACA,G;AACA,kC;AACA,2C;AACA,E;AACA,G;;AAEA,6B;AACA,yC;AACA,qB;AACA,mB;AACA,gB;AACA,G;AACA,oC;AACA,qB;AACA,mB;AACA,gB;AACA,G;AACA,yC;AACA,qB;AACA,kE;AACA,4E;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;;;ACpEA,oC;AACA,4E;AACA,kB;AACA,8M;AACA,I","file":"/packages/rationalk_core.js","sourcesContent":["RKCore = {};\nRKCore.packageMenu = []; // Packages can hook there to add menu entries.\nRKCore.packageDashboard = []; // Packages can hook there to add dashboard entries.\nRKCore.packageSettings = []; // Packages can hook there to add settings entries.\nRKCore.packageBackup = []; // Packages can hook there to add table for backup.\nRKCore.searchResultsPackage = [];\nRKCore.externalSearchResultsPackage = [];\nRKCore.customFieldsType = [];\n\nRKCore.log = function (data) {\n  if (Meteor.settings.public.debug) {\n    console.log(data);\n  }\n};\n","enforceLogin = function () {\n  var routeName = this.url;\n  if (routeName.match(/login/)) {\n    return;\n  }\n  if (routeName.match(/invitation/)) {\n    this.next();\n    return;\n  }\n  if (routeName.match(/reset-password/)) {\n    this.next();\n    return;\n  }\n  if (routeName.match(/external/)) {\n    this.next();\n    return;\n  }\n  if (routeName.match(/serverToken/)) {\n    this.next();\n    return;\n  }\n  if (!Meteor.userId()) {\n    this.layout(\"loginLayout\");\n    this.render();\n    return;\n  }\n  this.next();\n};\n\nRouter.onBeforeAction(function () {\n  this.next();\n});\n\nRouter.onBeforeAction(enforceLogin);\n\nRouter.route(\"/\", {\n  name: \"dashboard\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"views\"),\n      Meteor.subscribe(\"docs\"),\n      Meteor.subscribe(\"members\"), //needed to display the last activity owner\n      Meteor.subscribe(\"history\"),\n      Meteor.subscribe(\"revisions\"),\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"mySpace\"),\n      ];\n  },\n  progress: {\n    enabled: false,\n  },\n});\n\nRouter.configure({\n  layoutTemplate: \"layout\",\n  loadingTemplate: \"loading\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"members\")];\n  },\n});\n\nRouter.route(\"/login\", {\n  layoutTemplate: 'loginLayout',\n  data: function () {\n    templateData = { docs: Docs.find({}) };\n    return templateData;\n  },\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"naccounts\"),\n      Meteor.subscribe(\"accounts\"),\n      Meteor.subscribe(\"members\"),\n    ];\n  },\n});\n\nRouter.route(\"/access-denied\", {\n  layoutTemplate: 'accessDenied',\n});\n\n\nRouter.route(\"/reset-password/:token\", {\n  name: \"resetPassword\",\n  waitOn: function () {\n    return [\n\n    ];\n  },\n});\n\nRouter.route(\"/account/new\", {\n  name: \"accountNew\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"accounts\")];\n  },\n});\n\nRouter.route(\"/tags\", {\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"docs\"),\n      Meteor.subscribe(\"tags\"),\n    ];\n  },\n});\n\nRouter.route(\"/account/:_id/edit\", {\n  name: \"accountEdit\",\n  data: function () {\n    return Meteor.users.findOne(this.params._id);\n  },\n  waitOn: function () {\n    return [Meteor.subscribe(\"accounts\")];\n  },\n});\n\nRouter.route(\"/accounts\", {\n  name: \"accountList\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"accounts\")];\n  },\n});\n\nRouter.route(\"/axapta\", {\n  name: \"axapta\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"axapta\"),\n    ];\n  },\n});\n\nRouter.route(\"/members\", {\n  name: \"members\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"invitation\"),\n    ];\n  },\n});\n\n\n\nRouter.route(\"/member/new\", {\n  name: \"memberNew\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"members\"),\n    ];\n  },\n});\n\nRouter.route(\"/member/:_id/edit\", {\n  name: \"memberEdit\",\n  data: function () {\n    return Members.collection.findOne({\n      _id: this.params._id,\n    });\n  },\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"member\", this.params._id),\n      Meteor.subscribe(\"rkSettings\"),\n    ];\n  },\n});\n\nRouter.route(\"/views/add\", {\n  name: \"viewNew\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"views\")];\n  },\n});\n\nRouter.route(\"/view/:_id/edit\", {\n  name: \"viewEdit\",\n  data: function () {\n    return Views.findOne({}, {\n      reactive: true,\n    });\n  },\n  waitOn: function () {\n    var data = {};\n    data.viewId = this.params._id;\n    return [Meteor.subscribe(\"views\", data)];\n  },\n});\n\nRouter.route(\"/views\", {\n  name: \"viewList\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"views\"),\n    ];\n  },\n});\n\nRouter.route(\"/filelinks\", {\n  name: \"filelinks\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"filelinks\")];\n  },\n});\n\nRouter.route(\"/xml\", {\n  name: \"xml\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"XMLFiles\"),\n    ];\n  },\n});\n\n\nif (Meteor.settings.public.show.controlplan) {\n  Router.route(\"/controlplan\", {\n    name: \"controlplan\",\n    waitOn: function () {\n      return [Meteor.subscribe(\"controlplan\")];\n    },\n  });\n\n  Router.route(\"/controlplan/:_id/decCDMER\", {\n    name: \"decCDMER\",\n    layoutTemplate: 'printLayout',\n    waitOn: function () {\n      return [Meteor.subscribe(\"controlplan\")];\n    },\n  });\n\n  Router.route(\"/controlplan/:_id/planageCDMER\", {\n    name: \"planageCDMER\",\n    layoutTemplate: 'printLayout',\n    waitOn: function () {\n      return [Meteor.subscribe(\"controlplan\")];\n    },\n  });\n}\n\nRouter.route(\"/processes/:role/listDocs\", {\n  name: \"listDocsForRoles\",\n  waitOn: function () {\n    var data = {};\n    data.role = this.params.role;\n    return [\n      Meteor.subscribe(\"docs\", data),\n      Meteor.subscribe(\"rkSettings\"),\n    ];\n  },\n});\n\nif (Meteor.settings.public.show.processes) {\n  Router.route(\"/processes\", {\n    name: \"processes\",\n    waitOn: function () {\n      return [\n        Meteor.subscribe(\"processes\"),\n        Meteor.subscribe(\"rkSettings\"),\n      ];\n    },\n  });\n\n  Router.route(\"/processdocuments\", {\n    name: \"processdocuments\",\n    waitOn: function () {\n      return [Meteor.subscribe(\"processdocuments\")];\n    },\n  });\n\n  Router.route(\"/process/:_id\", {\n    name: \"process\",\n    data: function () {\n      return Processes.findOne(this.params._id);\n    },\n    waitOn: function () {\n      return [Meteor.subscribe(\"process\", this.params._id), Meteor.subscribe(\"processdocuments\")];\n    },\n  });\n\n  Router.route(\"/updateprocessdocuments/:processId/:elementId\", {\n    name: \"updateprocessdocuments\",\n    data: function () {\n      return Processes.findOne(this.params.processId);\n    },\n    waitOn: function () {\n      return [\n        Meteor.subscribe(\"process\", this.params.processId),\n        Meteor.subscribe(\"processdocuments\"),\n        Meteor.subscribe(\"docs\"),\n        Meteor.subscribe(\"revisions\"),\n        Meteor.subscribe(\"categories\"),\n        Meteor.subscribe(\"searchqueries\"),\n        Meteor.subscribe(\"views\"),\n        Meteor.subscribe(\"discussions\"),\n        Meteor.subscribe(\"messages\"),\n        Meteor.subscribe(\"members\"),\n        Meteor.subscribe(\"walkedfiles\"),\n        Meteor.subscribe(\"myNotes\"),\n      ];\n    },\n  });\n}\n\nif (Meteor.settings.public.show.gantts) {\n  Router.route(\"/gantts\", {\n    name: \"gantts\",\n    waitOn: function () {\n      return [\n        Meteor.subscribe(\"gantts\"),\n      ];\n    },\n  });\n\n  Router.route(\"/gantt/:_id\", {\n    name: \"gantt\",\n    data: function () {\n      return Gantts.findOne(this.params._id);\n    },\n    waitOn: function () {\n      return [\n        Meteor.subscribe(\"gantts\", this.params._id),\n       ];\n    },\n  });\n}\n\nRouter.route(\"/docs/docImport\", {\n  name: \"docImport\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"categories\"),\n    ];\n  },\n});\n\nRouter.route(\"/docs/docExport\", {\n  name: \"docExport\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe('docs'),\n    ];\n  },\n});\n\nRouter.route(\"/calculation\", {\n  name: \"calculation\",\n  waitOn: function () {\n    return [\n\n    ];\n  },\n});\n\nRouter.route(\"/doc/:_id/edit\", {\n  name: \"docEdit\",\n  onBeforeAction: function () {\n    if (Roles.userIsInRole(Meteor.user(), ['readonly'])) {\n      // render the accessDenied template but keep the url in the browser the same\n      this.render('accessDenied');\n    }\n    else {\n      this.next();\n    }\n  },\n  data: function () {\n    return Docs.findOne(this.params._id);\n  },\n  waitOn: function () {\n    var data = {};\n    data.docId = this.params._id;\n    return [\n      Meteor.subscribe(\"docs\", data),\n      Meteor.subscribe(\"views\"), //need all\n      Meteor.subscribe(\"members\"), //need all\n      Meteor.subscribe(\"categories\"), //need all\n      Meteor.subscribe(\"attachments\", \"doc-\" + data.docId),\n      Meteor.subscribe(\"predefinedtags\"),\n      Meteor.subscribe(\"rkSettings\"),\n      Meteor.subscribe(\"mySpace\"),\n      Meteor.subscribe(\"docHistory\", data.docId),\n    ];\n  },\n});\n\nRouter.route(\"/revision/:_id/view\", {\n  name: \"revisionView\",\n  data: function () {\n    return Revisions.findOne(this.params._id);\n  },\n  waitOn: function () {\n    var data = {};\n    data.revisionId = this.params._id;\n    return [\n      Meteor.subscribe(\"docs\", data),\n      Meteor.subscribe(\"views\", data),\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"categories\", data),\n      Meteor.subscribe(\"revisions\", data),\n      Meteor.subscribe(\"predefinedtags\"),\n      Meteor.subscribe(\"mySpace\"),\n    ];\n  },\n});\n\nRouter.route(\"/doc/create\", {\n  name: \"docCreate\",\n  template: \"docEdit\",\n  onBeforeAction: function () {\n    if (Roles.userIsInRole(Meteor.user(), ['readonly'])) {\n      // render the accessDenied template but keep the url in the browser the same\n      this.render('accessDenied');\n    }\n    else {\n      this.next();\n    }\n  },\n  data: function () {\n    return {\n      categoryId: Session.get('selectedCategory'),\n    };\n  },\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"docs\"),\n      Meteor.subscribe(\"views\"),\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"predefinedtags\"),\n      Meteor.subscribe(\"rkSettings\"),\n    ];\n  },\n});\n\nRouter.route(\"/categories/add\", {\n  name: \"categoryNew\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"categories\"), Meteor.subscribe(\"views\")];\n  },\n});\n\nRouter.route(\"/category/:_id/edit\", {\n  name: \"categoryEdit\",\n  data: function () {\n    return Categories.findOne(this.params._id);\n  },\n  waitOn: function () {\n    var data = {};\n    data.categoryId = this.params._id;\n    return [\n      Meteor.subscribe(\"categories\", data),\n      Meteor.subscribe(\"views\", data),\n      Meteor.subscribe(\"rkSettings\"),\n    ];\n  },\n});\n\nRouter.route(\"/categories\", {\n  name: \"categoryList\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"views\"),\n    ];\n  },\n});\n\nRouter.route(\"/invitation/:invitationId\", {\n  name: \"invitation\",\n  template: \"invitation\",\n  data: function () {\n    return Members.invitations.findOne(this.params.invitationId);\n  },\n  waitOn: function () {\n    return [Meteor.subscribe(\"members\"), Meteor.subscribe(\"invitation\", this.params.invitationId)];\n  },\n});\n\nRouter.route(\"/revisions/:docId\", {\n  name: \"revisions\",\n  template: \"revisions\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"doc-revisions\", this.params.docId), Meteor.subscribe(\"categories\"), Meteor.subscribe(\"views\")];\n  },\n});\n\nRouter.route(\"/browse/:categorySlug?\", {\n  name: \"browse\",\n  data: function () {\n    return this.params.categorySlug;\n  },\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"mySpace\"),\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"views\"),\n      Meteor.subscribe(\"docs\"),\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"revisions\"),\n    ];\n  },\n});\n\nRouter.route(\"/logs\", {\n  name: \"logs\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"history\"),\n    ];\n  },\n});\n\nif (Meteor.settings.public.show.about) {\n  Router.route(\"/about\");\n}\n\nRouter.route(\"/walk\", {\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"folderstoscan\"),\n      Meteor.subscribe(\"rkSettings\"),\n      Meteor.subscribe(\"rkStatus\"),\n    ];\n  },\n});\n\nRouter.route(\"/files\", {\n  name: \"files\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"walkedfiles\"),\n      Meteor.subscribe(\"rkStatus\"),\n    ];\n  },\n});\n\nRouter.route(\"/fileView\", {\n  name: \"fileView\",\n  waitOn: function () {\n    return [];\n  },\n});\n\nRouter.route(\"/backup\", {\n  name: \"backup\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"members\"),\n    ];\n  },\n});\n\nRouter.route(\"/synonyms\", {\n  name: \"synonyms\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"synonyms\")];\n  },\n});\n\nif (Meteor.settings.public.show.relationships) {\n  Router.route(\"/relationships\", {\n    name: \"relationships\",\n    waitOn: function () {\n      return [];\n    },\n  });\n}\n\nRouter.route(\"/search\", {\n  name: \"searchTpl\",\n  waitOn: function () {\n    var subscribtions =  [\n      Meteor.subscribe(\"revisions\"),\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"myCurrentSearchQuery\"),\n      Meteor.subscribe(\"views\"),\n      Meteor.subscribe(\"tags\"),\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"synonyms\"),\n      Meteor.subscribe(\"mySpace\"),\n      Meteor.subscribe(\"rkSettings\"),\n    ];\n\n    searchQuerySentToServer = Session.get(\"searchQuerySentToServer\");\n\n    if ((typeof searchQuerySentToServer !== 'undefined') && (searchQuerySentToServer !== '') ) {\n      searchType = Session.get(\"searchType\");\n      catFilter = Session.get(\"catFilter\");\n      includeWalkedFilesInResults = Session.get('includeWalkedFilesInResults');\n      if (typeof RKCSE !== 'undefined') {\n        includeWebInResults = Session.get('includeWebInResults');\n      }\n\n\n      RKCore.log(\"searchQuerySentToServer : \" + searchQuerySentToServer);\n      RKCore.log(\"searchType : \" + searchType);\n      RKCore.log(\"catFilter : \" + catFilter);\n      RKCore.log(\"includeWalkedFilesInResults : \" + includeWalkedFilesInResults);\n      if (typeof RKCSE !== 'undefined') {\n        RKCore.log(\"includeWebInResults : \" + includeWebInResults);\n      }\n\n      Meteor.subscribe(\"searchResults\", searchQuerySentToServer, catFilter, searchType, includeWalkedFilesInResults);\n\n      //todo transform like wiki :\n      if (typeof RKCSE !== 'undefined') {\n        if (includeWebInResults) {\n          Meteor.subscribe(\"cse\", searchQuerySentToServer);\n        }\n      }\n    }\n\n    return subscribtions;\n  },\n});\n\n\nRouter.route(\"/stats\", {\n  name: \"stats\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"categories\"),\n      Meteor.subscribe(\"docs\"),\n      Meteor.subscribe(\"history\"),\n      Meteor.subscribe(\"revisions\"),\n      Meteor.subscribe(\"searchqueries\"),\n      Meteor.subscribe(\"members\"),\n      Meteor.subscribe(\"tags\"),\n    ];\n  },\n});\n\nRouter.route(\"/predefinedtags/edit\", {\n  name: \"predefinedtagsEdit\",\n  waitOn: function () {\n    return [Meteor.subscribe(\"predefinedtags\")];\n  },\n});\n\nRouter.route(\"/settings\", {\n  name: \"settingsTemplate\",\n  waitOn: function () {\n    return [\n      Meteor.subscribe(\"rkSettings\"),\n      Meteor.subscribe(\"categories\"), //for the nav, not good...#todo\n    ];\n  },\n});\n","\nTemplate.__checkName(\"accessDenied\");\nTemplate[\"accessDenied\"] = new Template(\"Template.accessDenied\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t \", HTML.DIV({\n    \"class\": \"panel panel-default\"\n  }, \"\\n  \t\t\t \t\", HTML.DIV({\n    \"class\": \"panel-heading\",\n    style: \"position:relative\"\n  }, \"\\n  \t\t\t \t\t\", HTML.H3({\n    \"class\": \"panel-title\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Access denied\");\n  })), \"\\n          \"), \"\\n  \t\t\t\t\", HTML.DIV({\n    \"class\": \"panel-body\"\n  }, \"\\n  \t\t\t\t      \", HTML.P(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"access_denied\");\n  })), \"\\n          \"), \"\\n    \t\t\"), \"\\n\t\t\"), \"\\n\t\");\n}));\n","\nTemplate.__checkName(\"externalLayout\");\nTemplate[\"externalLayout\"] = new Template(\"Template.externalLayout\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"headerExternal\")), \"\\n      \", HTML.DIV({\n    id: \"main\",\n    \"class\": \"row-fluid\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n      \"), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"footer\");\nTemplate[\"footer\"] = new Template(\"Template.footer\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"footer\" class=\"row-fluid\">\\n      <div class=\"panel panel-default\">\\n          <div class=\"panel-body\">\\n            <p>&copy; rationalK. Hotline : <a href=\"tel:+41768173346\">+41768173346</a> | <a href=\"mailto:info@rationalk.ch\">info@rationalk.ch</a> | <a href=\"http://rationalk.ch\">http://rationalK.ch</a></p>\\n          </div>\\n      </div>\\n  </div>');\n}));\n","\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"nav\"));\n}));\n","\nTemplate.__checkName(\"headerExternal\");\nTemplate[\"headerExternal\"] = new Template(\"Template.headerExternal\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"navExternal\"));\n}));\n","\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", HTML.DIV({\n    id: \"main\",\n    \"class\": \"row-fluid\"\n  }, \"\\n          \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n        \"), \"\\n    \t\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"show\"), \"footer\");\n  }, function() {\n    return [ \"\\n            \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"currentUser\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"footer\")), \"\\n            \" ];\n    }), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n","Template.layout.helpers({\n  validLicense: function () {\n\t    return Session.get('validLicense');\n\t},\n  show: function (navItem) {\n\t\treturn Meteor.settings.public.show[navItem];\n  },\n});\n","\nTemplate.__checkName(\"loginLayout\");\nTemplate[\"loginLayout\"] = new Template(\"Template.loginLayout\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n          \", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n            \", HTML.DIV({\n    \"class\": \"panel panel-default\"\n  }, \"\\n\t\t\t\t          \", HTML.DIV({\n    \"class\": \"panel-body\"\n  }, \"\\n\t\t\t\t\t               \", HTML.H1(\"rationalK, \", Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"the Knowledge Management Tool\");\n  })), \"\\n\t\t\t\t           \"), \"\\n            \"), \"\\n          \"), \"\\n        \"), HTML.Raw('\\n        <div class=\"row\">\\n          <div class=\"col-md-12\">\\n            <div class=\"panel panel-default\">\\n                  <div class=\"panel-body\">\\n                      <span class=\"pull-right\"><a href=\"#\" class=\"setLanguage\" data-locale=\"en\"><img src=\"/famfamfam/gb.png\"></a> <a href=\"#\" class=\"setLanguage\" data-locale=\"fr\"><img src=\"/famfamfam/fr.png\"></a> <a href=\"#\" class=\"setLanguage\" data-locale=\"de\"><img src=\"/famfamfam/de.png\"></a></span>\\n                   </div>\\n            </div>\\n          </div>\\n        </div>\\n        '), HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t        \", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t            \", HTML.DIV({\n    \"class\": \"panel panel-default\"\n  }, \"\\n\t\t\t        \", HTML.DIV({\n    \"class\": \"panel-body\"\n  }, \"\\n\t\t\t\t        \", HTML.FORM({\n    id: \"login-form-2\"\n  }, \"\\n                  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"onDemo\"));\n  }, function() {\n    return [ \"\\n                  \", HTML.DIV({\n      \"class\": \"form-group\"\n    }, \"\\n      \t\t\t\t\t\t\t\", HTML.P(\"To login as admin : Email : demo-admin@rationalk.ch / Password : demo-admin\"), \"\\n      \t\t\t\t\t\t\t\", HTML.P(\"To login as user : Email : demo-user@rationalk.ch / Password : demo-user\"), \"\\n                  \"), \"\\n      \t\t\t\t\t\t\" ];\n  }), \"\\n\t\t\t\t\t\t    \", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n\t\t\t\t\t\t\t    \", HTML.Raw('<label for=\"login-email-2\">Email</label>'), \"\\n\t\t\t\t\t\t    \t\", HTML.Raw('<input type=\"email\" class=\"form-control\" id=\"login-email-2\">'), \"\\n                  \", HTML.P({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"helper_email_login\");\n  })), \"\\n\t\t\t\t\t\t    \"), \"\\n\t\t\t\t\t\t    \", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n\t\t\t\t\t\t\t    \", HTML.LABEL({\n    \"for\": \"login-password-2\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Password\");\n  })), \"\\n\t\t\t\t\t\t      \", HTML.Raw('<input type=\"password\" class=\"form-control\" id=\"login-password-2\">'), \"\\n                  \", HTML.P({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"helper_password_login\");\n  })), \"\\n\t\t\t\t\t\t    \"), \"\\n\t\t\t\t\t\t\t\t\", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": \"btn btn-primary\",\n    id: \"login-button-2\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Sign in\");\n  })), \" \", HTML.SMALL(HTML.A({\n    href: \"#\",\n    \"class\": \"forgotPassword\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"I have forgotten my password\");\n  }))), \"\\n\t\t\t   \t\t\t\"), \"\\n\t\t\t        \"), \"\\n\t\t    \t\"), \"\\n\t        \"), \"\\n        \"), \"\\n\\n        \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"showFooter\"));\n  }, function() {\n    return [ \"\\n      \t\t\", HTML.DIV({\n      id: \"footer\",\n      \"class\": \"row-fluid\"\n    }, \"\\n            \", HTML.DIV({\n      \"class\": \"panel panel-default\"\n    }, \"\\n                \", HTML.DIV({\n      \"class\": \"panel-body\"\n    }, \"\\n\t                \", HTML.P(HTML.CharRef({\n      html: \"&copy;\",\n      str: \"Â©\"\n    }), \" rationalK. Hotline : +4176 817 33 46 / info@rationalk.ch\"), \"\\n                \"), \"\\n            \"), \"\\n          \"), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n","Template.loginLayout.events({\n    \"click .setLanguage\": function (e) {\n  \t\te.preventDefault();\n      TAPi18n.setLanguage(e.currentTarget.dataset.locale);\n  \t\treturn true;\n    },\n    \"click a.forgotPassword\": function (e,t) {\n  \t\te.preventDefault();\n      var email = t.$('#login-email-2').val();\n      if (email){\n        console.log(email);\n        var option ={};\n        option.email = email;\n        Accounts.forgotPassword(option,function (err){\n          if (typeof(err) !== 'undefined') {\n            if (Meteor.settings.public.debug){console.log(err);}\n            if (err.reason=\"User not found\"){\n              if (typeof(toastr) !== 'undefined') {\n                toastr.error(\"Sorry, this email has never been registred to rationalK.\");\n              }\n            }\n          }\n          else {\n            if (typeof(toastr) !== 'undefined') {\n              toastr.success(\"We send you an email to : \"+ email);\n            }\n          }\n        });\n      }\n      else {\n        if (typeof(toastr) !== 'undefined') {\n          toastr.error(\"Type your email.\");\n        }\n      }\n  \t\treturn false;\n    },\n    'submit #login-form-2' : function (e, t){\n\t\te.preventDefault();\n\t\t// retrieve the input field values\n\t\t//console.log(t.$('#login-email-2').val());\n\t\tvar email = t.$('#login-email-2').val().toLowerCase();\n\t\tvar password = t.$('#login-password-2').val();\n\n\t    // Trim and validate your fields here....\n\t\t//console.log(\"email=\" + email);\n\t\t//console.log(password);\n\t    // If validation passes, supply the appropriate fields to the\n\t    // Meteor.loginWithPassword() function.\n\t    Meteor.loginWithPassword(email, password, function (err){\n\t    if (err){\n\t      // The user might not have been found, or their passwword\n\t      // could be incorrect. Inform the user that their\n\t      // login attempt has failed.\n        if (typeof(toastr) !== 'undefined') {\n    \t\t\ttoastr.error(err.reason+\". Please try again.\");\n    \t\t}\n\n\t      }\n\t    else\n\t    {\n\t      // The user has been logged in.\n\t    }\n\n\n      });\n         return false;\n      }\n});\n\n\nTemplate.loginLayout.helpers({\n\tonDemo: function () {\n\t\tif (document.URL.indexOf(\"demo.rationalk.ch\") == -1){\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t},\n\tshowFooter: function () {\n\t    return Meteor.settings.public.show.footer;\n\t},\n  isFreshInstall: function () {\n    //var nAccounts = Meteor.users.find().count();\n    var nAccounts = Members.collection.find().count();\n    console.log(nAccounts);\n    console.log(this);\n    console.log(this.data);\n\t},\n});\n\n\nTemplate.loginLayout.rendered = function () {\n  return Meteor.setTimeout(function () {\n    $(\"a.dropdown-toggle\").trigger(\"click\");\n    return $(\"#iron-router-progress\").width(0);\n  }, 500);\n};\n","\nTemplate.__checkName(\"nav\");\nTemplate[\"nav\"] = new Template(\"Template.nav\", (function() {\n  var view = this;\n  return [ Blaze.View(\"lookup:updateLocale\", function() {\n    return Spacebars.mustache(view.lookup(\"updateLocale\"));\n  }), \"\\n\t\", HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"navbar-header\"\n  }, \"\\n\t\t\t\t\", HTML.Raw('<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\\n              <span class=\"sr-only\">Toggle navigation</span>\\n              <span class=\"icon-bar\"></span>\\n              <span class=\"icon-bar\"></span>\\n              <span class=\"icon-bar\"></span>\\n            </button>'), \"\\n            \", HTML.A({\n    \"class\": \"navbar-brand\",\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"dashboard\");\n    },\n    title: function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Dashboard\");\n    }\n  }, Blaze.View(\"lookup:headerText\", function() {\n    return Spacebars.mustache(view.lookup(\"headerText\"));\n  }), \" \", HTML.Raw('<strong><span class=\"glyphicon glyphicon-home\" aria-hidden=\"true\"></span></strong>')), \"\\n          \t\"), \"\\n\\n\t\t  \t\", HTML.DIV({\n    id: \"navbar\",\n    \"class\": \"navbar-collapse collapse\"\n  }, \"\\n\t\t\t\t\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"loggedIn\"));\n  }, function() {\n    return [ \"\\n\t\t  \t\t\", HTML.UL({\n      \"class\": \"nav navbar-nav\"\n    }, \"\\n\t\t            \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"searchTpl\");\n      },\n      title: function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Search\");\n      }\n    }, HTML.SPAN(HTML.STRONG(HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-search\"\n    })), \" \", Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Search\");\n    })))), \"\\n\t\t            \", HTML.LI({\n      \"class\": \"dropdown\"\n    }, \"\\n\t                    \", HTML.A({\n      href: \"#\",\n      \"class\": \"dropdown-toggle\",\n      \"data-toggle\": \"dropdown\",\n      role: \"button\",\n      \"aria-expanded\": \"true\"\n    }, HTML.STRONG(HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-hdd\"\n    })), \" \", Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"DB\");\n    }), \" \", HTML.SPAN({\n      \"class\": \"caret\"\n    })), \"\\n\t                    \", HTML.UL({\n      \"class\": \"dropdown-menu\",\n      role: \"menu\"\n    }, \"\\n\t\t                    \", HTML.LI(HTML.A({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"dontDisplayIfUserIsReadOnly\"));\n      },\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"docCreate\");\n      },\n      title: function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Create DB entry\");\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Create DB entry\");\n    }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"browse\");\n      },\n      title: function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Browse the DB\");\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Browse the DB\");\n    }))), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"show\"), \"relationships\");\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"relationships\");\n        },\n        title: \"DB Relationships\"\n      }, \"DB Relationships\")), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"categories\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.LI({\n        \"class\": \"divider\"\n      }), \"\\n                \t\t\t\t\", HTML.LI({\n        \"class\": \"dropdown-header\"\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Categories\");\n      })), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\", Blaze.Each(function() {\n        return Spacebars.call(view.lookup(\"categories\"));\n      }, function() {\n        return [ \"\\n                \t\t\t\t\", HTML.LI(HTML.A({\n          href: function() {\n            return Spacebars.mustache(view.lookup(\"pathFor\"), \"browse\", Spacebars.kw({\n              categorySlug: Spacebars.dot(view.lookup(\".\"), \"slug\")\n            }));\n          },\n          \"data-catid\": function() {\n            return Spacebars.mustache(view.lookup(\"_id\"));\n          },\n          \"data-slug\": function() {\n            return Spacebars.mustache(view.lookup(\"slug\"));\n          },\n          \"class\": \"selectCategory\"\n        }, Blaze.View(\"lookup:name\", function() {\n          return Spacebars.mustache(view.lookup(\"name\"));\n        }))), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\" ];\n      }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t                    \"), \"\\n\t                \"), \"\\n\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"show\"), \"gantts\");\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"gantts\");\n        },\n        title: \"Gantts\"\n      }, \"Gantts\")), \"\\n\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"show\"), \"followup\");\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"followup\");\n        },\n        title: \"Follow Up\"\n      }, \"Follow Up\")), \"\\n\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\", HTML.LI({\n      \"class\": \"dropdown\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\", HTML.A({\n      href: \"#\",\n      \"class\": \"dropdown-toggle\",\n      \"data-toggle\": \"dropdown\",\n      role: \"button\",\n      \"aria-expanded\": \"false\"\n    }, \"Packages \", HTML.SPAN({\n      \"class\": \"caret\"\n    })), \"\\n\t\t\t\t\t\t\t\t\t\", HTML.UL({\n      \"class\": \"dropdown-menu\",\n      role: \"menu\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\t\", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"packageMenu\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\", Blaze.View(\"lookup:menuHTML\", function() {\n        return Spacebars.mustache(view.lookup(\"menuHTML\"));\n      }), \"\\n\t\t\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"show\"), \"processes\");\n    }, function() {\n      return [ \"\\n\t\t\t\t\t        \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"processes\");\n        },\n        title: \"Processes\"\n      }, HTML.IMG({\n        height: \"16px\",\n        src: \"/images/1422715147_tree_structure.png\"\n      }), \" Processes\")), \"\\n\t\t\t\t\t      \" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"show\"), \"controlplan\");\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"controlplan\");\n        },\n        title: \"Control Plan\"\n      }, \"Control Plan\")), \"\\n\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\\n\t\t            \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"isAdmin\"));\n    }, function() {\n      return [ \"\\n\t                \", HTML.LI({\n        \"class\": \"dropdown\"\n      }, \"\\n\t                    \", HTML.A({\n        href: \"#\",\n        \"class\": \"dropdown-toggle\",\n        \"data-toggle\": \"dropdown\",\n        role: \"button\",\n        \"aria-expanded\": \"false\"\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Config\");\n      }), \" \", HTML.SPAN({\n        \"class\": \"caret\"\n      })), \"\\n\t                    \", HTML.UL({\n        \"class\": \"dropdown-menu\",\n        role: \"menu\"\n      }, \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"categoryList\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Manage categories\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Categories\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"members\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Manage members\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Members\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"predefinedtagsEdit\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Manage predefined tags\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Manage predefined tags\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"synonyms\");\n        },\n        title: \"Manage search synonyms\"\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Manage search synonyms\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"docImport\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Import\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Import\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"docExport\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Export\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Export\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"stats\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Statistics\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Statistics\");\n      }))), \"\\n\t\t                    \", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"pathFor\"), \"settingsTemplate\");\n        },\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Settings\");\n        }\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Settings\");\n      }))), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.Comment(' OPEN SOURCE NOW !!\\n\t\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"{{pathFor \\'update\\'}}\" title=\\'{{_ \"Update\"}}\\'>{{_ \"Update\"}}</a></li>\\n\t\t\t\t\t\t\t\t\t\t\t\t'), \"\\n\t\t                    \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"show\"), \"about\");\n      }, function() {\n        return [ \"\\n\t\t                    \", HTML.LI(HTML.A({\n          href: function() {\n            return Spacebars.mustache(view.lookup(\"pathFor\"), \"about\");\n          },\n          title: function() {\n            return Spacebars.mustache(view.lookup(\"_\"), \"About\");\n          }\n        }, Blaze.View(\"lookup:_\", function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"About\");\n        }))), \"\\n\t\t                    \" ];\n      }), \"\\n\t                    \"), \"\\n\t                \"), \"\\n\t\t            \" ];\n    }), \"\\n        \t\t\"), \"\\n\t\t\t\t\t\t\" ];\n  }), \" \", HTML.Raw(\"<!-- end of if loggedIn -->\"), \"\\n\t\t\t\t\t\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"onInvitationPage\"));\n  }, function() {\n    return [ \"\\n\t\t\t\t\t\t\t\", HTML.Comment(\" Hide the sign-in button \"), \"\\n\t\t\t\t\t\t\" ];\n  }, function() {\n    return [ \"\\n\t\t\t        \", HTML.UL({\n      \"class\": \"nav navbar-nav navbar-right\"\n    }, \"\\n\t\t\t\t        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"onDemo\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t        \t\", HTML.Comment(\"No Change password button \"), \"\\n\t\t\t\t\t\t\t\t\t\", HTML.FORM({\n        id: \"logout-form\",\n        \"class\": \"form-inline\"\n      }, Blaze.View(\"lookup:username\", function() {\n        return Spacebars.mustache(view.lookup(\"username\"));\n      }), \" \", HTML.BUTTON({\n        type: \"submit\",\n        \"class\": \"btn btn-link\",\n        id: \"logout-button\"\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"Log out\");\n      }))), \"\\n\t\t\t\t        \" ];\n    }, function() {\n      return [ \"\\n\t\t\t            \t\", HTML.Comment(\" {{> loginButtons}} \"), \"\\n\t\t\t\t\t\t\t\t\t\t\", HTML.LI(HTML.A({\n        title: function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"Log out\");\n        },\n        \"class\": \"logout\",\n        href: \"#\"\n      }, HTML.SPAN({\n        \"class\": \"glyphicon glyphicon-log-out\",\n        \"aria-hidden\": \"true\"\n      }))), \"\\n\t\t\t            \" ];\n    }), \"\\n\t\t\t        \"), \"\\n\t\t\t\t\t\t\" ];\n  }), \"\\n\t\t\t\"), HTML.Raw(\"<!-- /.navbar-collapse -->\"), \"\\n\t\t\"), HTML.Raw(\"<!--/.container-fluid -->\"), \"\\n\t\") ];\n}));\n","Template.nav.rendered = function () {\n\tdocument.title = (typeof(Meteor.settings.public.header_text) !== 'undefined') ? Meteor.settings.public.header_text : \"rationalK\";\n\n\t Mousetrap.bind('c d', function () {\n\t\t Router.go(\"docCreate\");\n\t });\n\n\t if (Meteor.settings.public.show.followup) {\n\t\t \tMousetrap.bind('c t', function () {\n\t\t\t\tMeteor.call('createTask', function (error, result) {\n\t\t\t\t\tif (!error) {\n\t\t\t\t\t\ttaskId = result;\n\t\t\t\t\t\tRouter.go(\"editTask\", {_id: taskId});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t \t});\n\t\t}\n\n\t if (Meteor.settings.public.show.followup) {\n\t \tMousetrap.bind('f u', function () {\n\t\t bootbox.prompt(\"Type some tags separated with ,\", function(result) {\n\t\t\t var FollowUp = {};\n\t\t\t if (result !== null) {\n\t\t\t\t FollowUp.tags = result;\n\t\t\t\t Session.set(\"FollowUp\", FollowUp);\n\t\t\t\t bootbox.prompt(\"Type some text\", function (r) {\n\t\t\t\t\t FollowUp = Session.get(\"FollowUp\");\n\t\t\t\t\t if (r !== null) {\n\t\t\t\t\t\t FollowUp.text = r;\n\t\t\t\t\t\t Session.set(\"FollowUp\", FollowUp);\n\t\t\t\t\t\t Meteor.call('createFollowUp', FollowUp, function (error) {\n\t\t\t\t \t\t\tif (!error) {\n\t\t\t\t\t\t\t\tif (typeof(toastr) !== 'undefined') {\n\t                toastr.success(\"Follow Up succesfully saved\");\n\t              }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t }\n\t\t\t\t }); //end of second bootbox\n\t\t\t } //end of else\n\t\t });\n\t });\n\t} // end of if followup\n};\n\nTemplate.nav.helpers({\n\tonDemo: function () {\n\t\treturn (document.URL.indexOf(\"demo.rationalk.ch\") === -1) ? false : true;\n\t},\n\tupdateLocale: function () {\n\t\tif ( (typeof(Meteor.user()) !== 'undefined') && (Meteor.user()) ) {\n\t    if (typeof(Meteor.user().profile.locale) !== 'undefined') {\n\t      TAPi18n.setLanguage(Meteor.user().profile.locale);\n\t\t\t\ti18n.setLanguage(Meteor.user().profile.locale);\n\t    }\n\t    else {\n\t      TAPi18n.setLanguage('en');\n\t\t\t\ti18n.setLanguage('en');\n\t    }\n\t  }\n\t  else {\n\t    TAPi18n.setLanguage('en');\n\t\t\ti18n.setLanguage('en');\n\t  }\n\t},\n\tonInvitationPage: function () {\n\t  if (Router.current().url.indexOf(\"/invitation/\") !== -1) {\n\t\t\tRKCore.log('I am on the invitation page, I will hide the Sign-In button.');\n\t    return true;\n\t  }\n\t\treturn false;\n\t},\n\tloggedIn: function () {\n    return Meteor.user();\n  },\n\tpackageMenu: function () {\n\t\treturn RKCore.packageMenu;\n\t},\n\tusername: function () {\n\t\treturn Meteor.user().username;\n\t},\n\tshow: function (navItem) {\n\t\treturn Meteor.settings.public.show[navItem];\n  },\n\thasTemplate: function (templateName) {\n    return Template[templateName];\n  },\n\theaderText: function () {\n\t\treturn (typeof(Meteor.settings.public.header_text) !== 'undefined') ? Meteor.settings.public.header_text : \"rationalK\";\n\t},\n\tcategories: function () {\n\t\treturn Categories.find().fetch();\n\t},\n});\n\nTemplate.nav.events({\n\t'submit #logout-form': function (e) {\n\t\te.preventDefault();\n\t  Meteor.logout();\n\t  return false;\n\t},\n\t'click a.logout': function (e) {\n\t\te.preventDefault();\n\t  Meteor.logout();\n\t  return false;\n\t},\n\t\"click a.selectCategory\": function (e) {\n\t\te.preventDefault();\n\t  Session.set('selectedCategory', e.currentTarget.dataset.catid);\n\t  return Router.go(\"browse\", {categorySlug: e.currentTarget.dataset.slug});\n\t},\n});\n","\nTemplate.__checkName(\"navExternal\");\nTemplate[\"navExternal\"] = new Template(\"Template.navExternal\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"navbar-header\"\n  }, \"\\n\t\t\t\t\", HTML.Raw('<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\\n              <span class=\"sr-only\">Toggle navigation</span>\\n              <span class=\"icon-bar\"></span>\\n              <span class=\"icon-bar\"></span>\\n              <span class=\"icon-bar\"></span>\\n            </button>'), \"\\n            \", HTML.STRONG(Blaze.View(\"lookup:headerText\", function() {\n    return Spacebars.mustache(view.lookup(\"headerText\"));\n  })), \"\\n      \"), \"\\n\t\t\"), HTML.Raw(\"<!--/.container-fluid -->\\n\t\"));\n}));\n","Template.navExternal.rendered = function () {\n\tdocument.title = (typeof(Meteor.settings.public.header_text) !== 'undefined')?Meteor.settings.public.header_text:\"rationalK\";\n};\n\nTemplate.navExternal.helpers({\n\tonDemo: function () {\n\t\tif (document.URL.indexOf(\"demo.rationalk.ch\") == -1){\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t},\n\tupdateLocale: function () {\n\t\tif ( (typeof(Meteor.user()) !== 'undefined') && (Meteor.user()) ) {\n\t    if (typeof(Meteor.user().profile.locale) !== 'undefined') {\n\t      TAPi18n.setLanguage(Meteor.user().profile.locale);\n\t\t\t\ti18n.setLanguage(Meteor.user().profile.locale);\n\t    }\n\t    else {\n\t      TAPi18n.setLanguage('en');\n\t\t\t\ti18n.setLanguage('en');\n\t    }\n\t  }\n\t  else {\n\t    TAPi18n.setLanguage('en');\n\t\t\ti18n.setLanguage('en');\n\t  }\n\t},\n\tonInvitationPage : function () {\n\t  if (Router.current().url.indexOf(\"/invitation/\") == -1){\n\t    // I am not on the invitation page\n\t    return false\n\t  }\n\t  else {\n\t\t\tconsole.log('I am on the invitation page, I will hide the Sign-In button.')\n\t    return true\n\t  }\n\t},\n\tloggedIn: function () {\n    return Meteor.user();\n  },\n\tusername: function (){\n\t\treturn Meteor.user().username;\n\t},\n\theaderText: function (){\n\t\treturn (typeof(Meteor.settings.public.header_text) !== 'undefined')?Meteor.settings.public.header_text:\"rationalK\";\n\t},\n\tcategoriesWithSlug : function (){\n\t\treturn Session.get(\"categoriesWithSlug\");\n\t}\n});\n\nTemplate.navExternal.events({\n\t'submit #logout-form' : function (e, t){\n\t\te.preventDefault();\n\t  Meteor.logout();\n\t  return false;\n\t},\n\t'click a.logout' : function (e, t){\n\t\te.preventDefault();\n\t  Meteor.logout();\n\t  return false;\n\t},\n\t\"click a.selectCategory\": function (e) {\n\t\te.preventDefault();\n\t  Session.set('selectedCategory', e.currentTarget.dataset.catid);\n\t  return Router.go(\"browse\",{categorySlug : e.currentTarget.dataset.slug});\n\t }\n});\n","\nTemplate.__checkName(\"printLayout\");\nTemplate[\"printLayout\"] = new Template(\"Template.printLayout\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- needed for the special css print -->\\n    <!-- yield should contain a subpage div (needed for the special css print) -->\\n    \"), Spacebars.include(view.lookupTemplate(\"yield\")) ];\n}));\n"]}