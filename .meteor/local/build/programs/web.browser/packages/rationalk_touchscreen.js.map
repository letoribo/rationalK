)]}'
{"version":3,"sources":["rationalk:touchscreen//Users/thomasdokithonon/rationalK/packages/rationalk-touchscreen/package-tap.i18n","rationalk:touchscreen/lib/methods.js","rationalk:touchscreen/lib/collections.js","rationalk:touchscreen/lib/routes.js","rationalk:touchscreen/lib/client/menu.js","rationalk:touchscreen/lib/client/dashboard.js","rationalk:touchscreen/lib/client/settings.js","rationalk:touchscreen/lib/client/settingsRKTouchScreen.html","rationalk:touchscreen/lib/client/settingsRKTouchScreen.js","rationalk:touchscreen/lib/client/viewProjectsTouchScreen.html","rationalk:touchscreen/lib/client/viewProjectsTouchScreen.js","rationalk:touchscreen//Users/thomasdokithonon/rationalK/packages/rationalk-touchscreen/i18n/en.i18n.json","rationalk:touchscreen//Users/thomasdokithonon/rationalK/packages/rationalk-touchscreen/i18n/fr.i18n.json"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uH;;AAEA,+D;AACA,gD;AACA,2C;AACA,iF;AACA,uH;;AAEA,qD;AACA,6B;AACA,yC;;;;;;;;;;;;;;;;;;;ACVA,mB;AACA,+B;;AAEA,gB;;AAEA,G;;;;;;;;;;;;;;;;;;;ACLA,kE;AACA,sE;;AAEA,4B;AACA,iD;AACA,gD;AACA,kD;AACA,G;;AAEA,8B;AACA,iD;AACA,gD;AACA,kD;AACA,G;;;;;;;;;;;;;;;;;;;ACbA,8C;AACA,wC;AACA,oC;AACA,yB;AACA,8C;AACA,2C;AACA,M;AACA,K;AACA,C;;;;;;;;;;;;;;;;;;;ACRA,wC;AACA,G;AACA,6B;AACA,K;AACA,8C;AACA,oD;AACA,oC;AACA,+C;AACA,0E;AACA,2H;AACA,iH;AACA,uH;AACA,kD;AACA,E;AACA,E;AACA,gB;AACA,wC;AACA,iB;AACA,G;AACA,yB;AACA,qC;AACA,G;AACA,E;AACA,yB;AACA,E;AACA,8C;AACA,0B;AACA,K;AACA,2B;AACA,uC;AACA,K;AACA,I;AACA,C;;;;;;;;;;;;;;;;;;;AChCA,8C;AACA,+B;AACA,K;AACA,+C;AACA,6C;AACA,K;AACA,I;AACA,C;;;;;;;;;;;;;;;;;;;ACPA,4B;AACA,G;AACA,sC;AACA,qC;AACA,G;AACA,E;;;;;;;;;;;;;;;;;;;;ACJA,8C;AACA,gG;AACA,kB;AACA,mB;AACA,kB;AACA,uB;AACA,wB;AACA,yB;AACA,kC;AACA,yB;AACA,6B;AACA,8B;AACA,yB;AACA,0B;AACA,wC;AACA,yD;AACA,sC;AACA,yB;AACA,gC;AACA,yB;AACA,iC;AACA,yB;AACA,qC;AACA,0B;AACA,wC;AACA,2E;AACA,uC;AACA,iB;AACA,4B;AACA,wB;AACA,6B;AACA,6D;AACA,M;AACA,uB;AACA,8D;AACA,K;AACA,+C;AACA,yB;AACA,qC;AACA,sC;AACA,wC;AACA,+E;AACA,uC;AACA,iB;AACA,4B;AACA,oC;AACA,6B;AACA,gE;AACA,M;AACA,uB;AACA,0E;AACA,K;AACA,2B;AACA,yB;AACA,wC;AACA,uE;AACA,uD;AACA,mB;AACA,8B;AACA,wC;AACA,wD;AACA,8D;AACA,I;;;;;;;;;;;;;;;;;;;AC/DA,uD;AACA,2B;AACA,+E;AACA,e;AACA,mE;AACA,yD;AACA,O;AACA,0C;AACA,sD;AACA,gB;AACA,G;AACA,I;AACA,2F;AACA,e;AACA,mE;AACA,yD;AACA,O;AACA,sD;AACA,sD;AACA,gB;AACA,G;AACA,I;AACA,E;;AAEA,wC;AACA,8B;AACA,gD;AACA,2C;AACA,oC;AACA,K;AACA,G;AACA,0C;AACA,iD;AACA,0C;AACA,iD;AACA,I;AACA,G;AACA,G;;AAEA,uC;AACA,+B;AACA,kB;AACA,uB;AACA,sD;AACA,8E;AACA,+D;AACA,iB;AACA,6C;AACA,8C;AACA,S;AACA,O;AACA,O;AACA,I;AACA,G;;;;;;;;;;;;;;;;;;;;ACpDA,gD;AACA,oG;AACA,kB;AACA,mB;AACA,kB;AACA,uB;AACA,wB;AACA,wB;AACA,kC;AACA,0B;AACA,6B;AACA,8B;AACA,0B;AACA,0B;AACA,wC;AACA,2E;AACA,sB;AACA,yB;AACA,a;AACA,c;AACA,6B;AACA,uB;AACA,qE;AACA,K;AACA,wC;AACA,mE;AACA,4C;AACA,yB;AACA,0B;AACA,kB;AACA,2B;AACA,wB;AACA,uC;AACA,mD;AACA,iB;AACA,qC;AACA,4B;AACA,kC;AACA,oC;AACA,sI;AACA,mD;AACA,mB;AACA,mF;AACA,4D;AACA,6B;AACA,gE;AACA,qD;AACA,mB;AACA,qF;AACA,sD;AACA,8D;AACA,4D;AACA,gE;AACA,8D;AACA,iE;AACA,uE;AACA,4B;AACA,qD;AACA,iB;AACA,qE;AACA,oF;AACA,uB;AACA,0E;AACA,I;;;;;;;;;;;;;;;;;;;AChEA,yD;;;AAGA,E;;AAEA,0C;AACA,wB;AACA,iD;AACA,4C;AACA,G;AACA,sB;AACA,+C;AACA,6B;AACA,gB;AACA,G;AACA,oC;AACA,e;AACA,4B;AACA,uB;AACA,gE;AACA,iC;AACA,0B;AACA,iC;AACA,sJ;AACA,G;AACA,uC;AACA,G;AACA,G;;AAEA,yC;AACA,wC;AACA,iB;AACA,sB;AACA,wD;AACA,4D;AACA,iB;AACA,K;AACA,M;AACA,gB;AACA,G;AACA,0C;AACA,iB;AACA,sB;AACA,uD;AACA,sD;AACA,oE;AACA,iB;AACA,K;AACA,M;AACA,gB;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;;ACnDA,6B;AACA,2C;AACA,wC;;AAEA,gC;AACA,yD;AACA,C;AACA,gD;AACA,kB;AACA,wG;AACA,gD;AACA,8E;;AAEA,oD;AACA,8C;;AAEA,yC;AACA,C;;;;;;;;;;;;;;;;;;;ACjBA,6B;AACA,2C;AACA,wC;;AAEA,gC;AACA,yD;AACA,C","file":"/packages/rationalk_touchscreen.js","sourcesContent":["TAPi18n.packages[\"rationalk:touchscreen\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n// define the package's templates registrar\nregisterI18nTemplate = TAPi18n._getRegisterHelpersProxy(\"rationalk:touchscreen\");\nregisterTemplate = registerI18nTemplate; // XXX OBSOLETE, kept for backward compatibility will be removed in the future\n\n// Record the list of templates prior to package load\nvar _ = Package.underscore._;\nnon_package_templates = _.keys(Template);\n","RKTouchScreen = {};\nRKTouchScreen.Collections = {};\n\nMeteor.methods({\n\n});\n","ProjectsTouchScreen = new Mongo.Collection('projectstouchscreen');\nSettingsRKTouchScreen = new Mongo.Collection('settingsrktouchscreen');\n\nProjectsTouchScreen.allow( {\n\t\tinsert: function (userId) {return !! userId; },\n\t\tupdate: function (userId) {return !!userId; },\n    remove: function (userId) {return !!userId; },\n});\n\nSettingsRKTouchScreen.allow( {\n\t\tinsert: function (userId) {return !! userId; },\n\t\tupdate: function (userId) {return !!userId; },\n    remove: function (userId) {return !!userId; },\n});\n","if (Meteor.settings.public.show.touchscreen) {\n  Router.route(\"/projectsTouchScreen\", {\n    name: \"viewProjectsTouchScreen\",\n    waitOn: function () {\n      Meteor.subscribe(\"projectstouchscreen\");\n      return [Meteor.subscribe(\"members\")];\n    },\n  });\n}\n","var urlTasks = Router.routes.tasks.path(\n  {\n    filterBy: 'authorUserId',\n  });\nvar urlMinutes = Router.routes.minutes.path();\nvar urlProjects = Router.routes.viewProjects.path();\nmenuHTML = new Spacebars.SafeString(\n   '<li role=\"separator\" class=\"divider\"></li>'\n    + '<li class=\"dropdown-header\">' + TAPi18n.__(\"Touchscreen\") + '</li>'\n    //+ '<li><a href=\"' + urlProjects + '\" title=\"' + TAPi18n.__(\"Projects\") + '\">' + TAPi18n.__(\"Prhojects\") + '</a></li>'\n    //+ '<li><a href=\"' + urlTasks + '\" title=\"' + TAPi18n.__(\"Tasks\") + '\">' + TAPi18n.__(\"Tasks\") + '</a></li>'\n    //+ '<li><a href=\"' + urlMinutes + '\" title=\"' + TAPi18n.__(\"Minutes\") + '\">' + TAPi18n.__(\"Minutes\") + '</a></li>'\n    + '<li role=\"separator\" class=\"divider\"></li>'\n);\n/*\nvar packageMenu;\npackageMenu = Session.get(\"packageMenu\")\npackageMenu.push(\n  {\n    \"menuHTML\": menuHTML,\n    \"fromPackage\": \"rationalk:tasks\",\n  }\n);\nSession.set(packageMenu);\n*/\nif (Meteor.settings.public.show.touchscreen) {\n  RKCore.packageMenu.push(\n    {\n      \"menuHTML\": menuHTML,\n      \"fromPackage\": \"rationalk:tasks\",\n    }\n  );\n}\n","if (Meteor.settings.public.show.touchscreen) {\n  RKCore.packageDashboard.push(\n    {\n      \"templateName\": \"dashboardRKTouchscreen\",\n      \"fromPackage\": \"rationalk:touchscreen\",\n    }\n  );\n}\n","RKCore.packageSettings.push(\n  {\n    \"templateName\": \"settingsRKTasks\",\n    \"fromPackage\": \"rationalk:tasks\",\n  }\n);\n","\nTemplate.__checkName(\"settingsRKTouchScreen\");\nTemplate[\"settingsRKTouchScreen\"] = new Template(\"Template.settingsRKTouchScreen\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t \", HTML.DIV({\n    \"class\": \"panel panel-default\"\n  }, \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"panel-heading\",\n    style: \"position:relative\"\n  }, \"\\n\t\t\t\t\t\", HTML.H3({\n    \"class\": \"panel-title\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Tasks\");\n  })), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"panel-body\"\n  }, \"\\n          \", HTML.FORM({\n    id: \"settingsRKTasks\"\n  }, \"\\n            \", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n              \", HTML.LABEL({\n    \"for\": \"prefixMinutes\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Prefix for minutes name\");\n  })), \"\\n              \", HTML.INPUT({\n    type: \"text\",\n    \"class\": \"form-control\",\n    id: \"prefixMinutes\",\n    placeholder: function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Minutes\");\n    },\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"prefixMinutes\"));\n    }\n  }), \"\\n            \"), \"\\n\t\t\t\t\t\t\", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n              \", HTML.LABEL({\n    \"for\": \"folderPathForMinutesPrint\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Path to save minutes as pdf\");\n  })), \"\\n              \", HTML.INPUT({\n    type: \"text\",\n    \"class\": \"form-control\",\n    id: \"folderPathForMinutesPrint\",\n    placeholder: function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"/Downloads\");\n    },\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"folderPathForMinutesPrint\"));\n    }\n  }), \"\\n\t\t\t\t\t\t\t\", HTML.P({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"No trailing slash /\");\n  })), \"\\n            \"), \"\\n          \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": \"btn btn-default\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Save\");\n  })), \"\\n          \"), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\"), \"\\n\t\t\"), \"\\n\t\");\n}));\n","Template.settingsRKTouchScreen.rendered = function () {\n  var settingsRKTasks = {};\n  Meteor.call('getSettingsRKTasks', \"prefixMinutes\", function (error, result) {\n\t\tif (!error) {\n      if (typeof(Session.get(\"settingsRKTasks\")) !== 'undefined') {\n        settingsRKTasks = Session.get(\"settingsRKTasks\");\n      }\n\t\t\tsettingsRKTasks.prefixMinutes = result;\n      Session.set(\"settingsRKTasks\", settingsRKTasks);\n\t\t\treturn false;\n\t\t}\n\t});\n  Meteor.call('getSettingsRKTasks', \"folderPathForMinutesPrint\", function (error, result) {\n\t\tif (!error) {\n      if (typeof(Session.get(\"settingsRKTasks\")) !== 'undefined') {\n        settingsRKTasks = Session.get(\"settingsRKTasks\");\n      }\n\t\t\tsettingsRKTasks.folderPathForMinutesPrint = result;\n      Session.set(\"settingsRKTasks\", settingsRKTasks);\n\t\t\treturn false;\n\t\t}\n\t});\n};\n\nTemplate.settingsRKTouchScreen.helpers({\n  prefixMinutes: function () {\n\t\tvar settings = Session.get(\"settingsRKTasks\");\n    if (typeof(settings) !== 'undefined') {\n\t\t    return settings.prefixMinutes;\n    }\n\t},\n  folderPathForMinutesPrint: function () {\n   var settings = Session.get(\"settingsRKTasks\");\n   if (typeof(settings) !== 'undefined') {\n       return settings.folderPathForMinutesPrint;\n   }\n },\n});\n\nTemplate.settingsRKTouchScreen.events({\n  'submit form': function (e) {\n    var data = {};\n    e.preventDefault();\n    data.prefixMinutes = e.target.prefixMinutes.value;\n    data.folderPathForMinutesPrint = e.target.folderPathForMinutesPrint.value;\n    Meteor.call('updateSettingsRKTasks', data, function (err) {\n      if (!err) {\n        if (typeof(toastr) !== 'undefined') {\n          toastr.success(TAPi18n.__('Saved'));\n        }\n      }\n    });\n  },\n});\n","\nTemplate.__checkName(\"viewProjectsTouchScreen\");\nTemplate[\"viewProjectsTouchScreen\"] = new Template(\"Template.viewProjectsTouchScreen\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"panel panel-default\"\n  }, \"\\n\t\t\t \t\", HTML.DIV({\n    \"class\": \"panel-heading\",\n    style: \"position:relative\"\n  }, \"\\n\t\t\t \t\t\", HTML.H3({\n    \"class\": \"panel-title\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Project(s) Touch Screen\");\n  }), \" \", HTML.SPAN({\n    \"class\": \"pull-right\"\n  }, HTML.A({\n    href: \"#\",\n    \"class\": \"resetDemoData\",\n    title: function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Reset demo data\");\n    }\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"Reset demo data\");\n  })))), \"\\n        \"), \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"panel-body\"\n  }, \"\\n\t\t\t\t\t\", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\t\t\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\t\t\t\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"demoData\"));\n  }, function() {\n    return [ \"\\n\t\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"tableScroll\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\", HTML.TABLE({\n      \"class\": \"table table-striped\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\t\", HTML.TR(HTML.TH(\"Id\"), HTML.TH(\"Project Id\"), HTML.TH(\"Project Name\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"phases\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\", HTML.TH(Blaze.View(\"lookup:phaseName\", function() {\n        return Spacebars.mustache(view.lookup(\"phaseName\"));\n      })), \"\\n\t\t\t\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"demoData\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\", HTML.TR(HTML.TD(Blaze.View(\"lookup:_id\", function() {\n        return Spacebars.mustache(view.lookup(\"_id\"));\n      })), HTML.TD(Blaze.View(\"lookup:projectId\", function() {\n        return Spacebars.mustache(view.lookup(\"projectId\"));\n      })), HTML.TD(Blaze.View(\"lookup:projectName\", function() {\n        return Spacebars.mustache(view.lookup(\"projectName\"));\n      })), Blaze.View(\"lookup:phasesForThisProject\", function() {\n        return Spacebars.mustache(view.lookup(\"phasesForThisProject\"));\n      })), \"\\n\t\t\t\t\t\t\t\t\t\t\" ];\n    }), \"\\n\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\" ];\n  }, function() {\n    return [ \"\\n\t\t\t\t\t\t\t\t\", HTML.P(Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"Nothing to show for the moment\");\n    })), \"\\n\t\t\t\t\t\t\t\" ];\n  }), \"\\n\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\"), \"\\n        \"), \"\\n    \t\"), \"\\n\t\t\"), \"\\n\t\");\n}));\n","Template.viewProjectsTouchScreen.rendered = function () {\n\n\n};\n\nTemplate.viewProjectsTouchScreen.helpers({\n\tdemoData: function () {\n\t\tRKCore.log(ProjectsTouchScreen.find().fetch());\n\t\treturn ProjectsTouchScreen.find().fetch();\n\t},\n\tphases: function () {\n\t\toneProject = ProjectsTouchScreen.findOne({});\n\t\tphases = oneProject.phases;\n\t\treturn phases;\n\t},\n\tphasesForThisProject: function () {\n\t\tvar str = '';\n\t\tRKCore.log(\"this._id : \");\n\t\tRKCore.log(this._id);\n\t\tcurrentProject = ProjectsTouchScreen.findOne({_id: this._id});\n\t\tphases = currentProject.phases;\n\t\tnPhases = phases.length;\n\t\tfor (i = 0; i < nPhases; i++) {\n\t\t\tstr = str + '<td>' + phases[i].phaseScheduledFinishedDate + '<a class=\"markAsDone\" data-phasename=\"phase1\" data-projectid=\"proo\">OK</a>' + '</td>';\n\t\t}\n\t\treturn new Spacebars.SafeString(str);\n\t},\n});\n\nTemplate.viewProjectsTouchScreen.events({\n\t\"click a.resetDemoData\": function (e) {\n\t\t\tvar data = {};\n\t\t\te.preventDefault();\n\t\t\tdata.projectsIds = e.currentTarget.dataset.projectid;\n\t    Meteor.call('resetDemoData', function (error, result) {\n\t\t\t\tif (!error) {\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t},\n\t\"click a.markPhaseAsDone\": function (e) {\n\t\t\tvar data = {};\n\t\t\te.preventDefault();\n\t\t\tdata.projectsId = e.currentTarget.dataset.projectid;\n\t\t\tdata.phaseName = e.currentTarget.dataset.phaseName;\n\t    Meteor.call('markPhaseAsDone', data, function (error, result) {\n\t\t\t\tif (!error) {\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t},\n});\n","var _ = Package.underscore._,\n    package_name = \"rationalk:touchscreen\",\n    namespace = \"rationalk:touchscreen\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"invitation_to_join_info_login\":\"Your username will be your company email.\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\nvar package_templates = _.difference(_.keys(Template), non_package_templates);\n\nfor (var i = 0; i < package_templates.length; i++) {\n  var package_template = package_templates[i];\n\n  registerI18nTemplate(package_template);\n}\n","var _ = Package.underscore._,\n    package_name = \"rationalk:touchscreen\",\n    namespace = \"rationalk:touchscreen\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n"]}