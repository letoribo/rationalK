)]}'
{"version":3,"sources":["jesa:fieldtypes//Users/thomasdokithonon/rationalK/packages/rationalk-custom-jesa-fieldtypes/package-tap.i18n","jesa:fieldtypes/lib/hooks.js","jesa:fieldtypes/lib/client/customfieldtypes.js","jesa:fieldtypes//Users/thomasdokithonon/rationalK/packages/rationalk-custom-jesa-fieldtypes/i18n/en.i18n.json","jesa:fieldtypes//Users/thomasdokithonon/rationalK/packages/rationalk-custom-jesa-fieldtypes/i18n/fr.i18n.json"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iH;;AAEA,+D;AACA,gD;AACA,2C;AACA,2E;AACA,uH;;AAEA,qD;AACA,6B;AACA,yC;;;;;;;;;;;;;;;;;;;ACVA,6B;AACA,G;AACA,wB;AACA,uB;AACA,qC;AACA,uD;AACA,yC;AACA,G;;AAEA,6B;AACA,G;AACA,4B;AACA,2B;AACA,yC;AACA,sD;AACA,yC;AACA,G;;;;;;;;;;;;;;;;;;;AChBA,gB;AACA,sC;AACA,8F;AACA,I;AACA,wB;AACA,uB;AACA,K;AACA,I;AACA,4B;AACA,2B;AACA,K;AACA,I;AACA,gC;AACA,G;AACA,0B;AACA,kB;AACA,iC;AACA,kB;AACA,Y;AACA,kB;AACA,iE;AACA,6G;AACA,6B;AACA,2F;AACA,uB;AACA,kF;AACA,yB;AACA,0C;AACA,gG;AACA,M;AACA,gH;AACA,K;;AAEA,+E;AACA,uD;AACA,oE;;;AAGA,2C;AACA,6E;;AAEA,4B;AACA,8B;AACA,K;AACA,U;AACA,wC;AACA,2D;AACA,6E;AACA,8D;AACA,0D;AACA,wC;AACA,O;AACA,Y;AACA,kC;AACA,O;AACA,8C;AACA,M;AACA,uD;AACA,yB;AACA,K;AACA,qG;AACA,I;AACA,S;AACA,yC;AACA,iH;AACA,K;AACA,I;AACA,G;AACA,c;AACA,G;AACA,8B;AACA,gC;AACA,uB;AACA,Q;AACA,e;AACA,qD;AACA,2D;AACA,8D;AACA,kC;AACA,2D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,+B;AACA,4B;AACA,sB;AACA,0F;AACA,I;;AAEA,kC;AACA,kC;AACA,2D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,8D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,kE;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,+D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,oE;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,4D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,2B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,kC;AACA,kC;AACA,4D;AACA,0B;AACA,uB;AACA,uB;AACA,e;AACA,4B;AACA,sB;AACA,0F;AACA,I;AACA,kC;;AAEA,e;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;;ACvLA,6B;AACA,qC;AACA,kC;;AAEA,gC;AACA,yD;AACA,C;AACA,gD;AACA,kB;AACA,wG;AACA,gD;AACA,8E;;AAEA,oD;AACA,8C;;AAEA,yC;AACA,C;;;;;;;;;;;;;;;;;;;ACjBA,6B;AACA,qC;AACA,kC;;AAEA,gC;AACA,yD;AACA,C","file":"/packages/jesa_fieldtypes.js","sourcesContent":["TAPi18n.packages[\"jesa:fieldtypes\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n// define the package's templates registrar\nregisterI18nTemplate = TAPi18n._getRegisterHelpersProxy(\"jesa:fieldtypes\");\nregisterTemplate = registerI18nTemplate; // XXX OBSOLETE, kept for backward compatibility will be removed in the future\n\n// Record the list of templates prior to package load\nvar _ = Package.underscore._;\nnon_package_templates = _.keys(Template);\n","RKCore.customFieldsType.push(\n  {\n    value: \"generateId\",\n    text: \"generateId\",\n    function: \"generateId\",//not used\n    packageExportName: \"RKJESACustomFields\", //not used\n    package: \"jesa:fieldtypes\",//not used\n});\n\nRKCore.customFieldsType.push(\n  {\n    value: \"ChooseFromList\",\n    text: \"ChooseFromList\",\n    function: \"ChooseFromList\",//not used\n    packageExportName: \"RKJESACustomFields\",//not used\n    package: \"jesa:fieldtypes\",//not used\n});\n","Meteor.methods({\n\tlistAvailableFunctions: function () {\n\t\tlistAvailableFunctions = [ //the value should match a function name also define in this file\n\t\t\t{\n\t\t\t\tvalue: \"generateId\",\n\t\t\t\ttext: \"generateId\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: \"ChooseFromList\",\n\t\t\t\ttext: \"ChooseFromList\",\n\t\t\t},\n\t\t];\n\t\treturn listAvailableFunctions;\n\t},\n\tgenerateId: function () {\n\t\tvar idFieldName;\n\t\tvar lastCharactersOfDocId = [];\n\t\tvar arrayLength;\n\t\tvar docId;\n\t\tvar IdSubstring;\n\t\tRKCore.log(\"Running custom function generateId for a company\");\n\t\tif ((document.getElementById(\"docEdit\")) && (typeof(document.getElementById(\"docEdit\")) !== 'undefined')) {\n\t\t\tidFieldName = \"Report ID\";\n\t\t\tcurrentDocId = document.getElementById(\"docEdit\").elements.namedItem(idFieldName).value;\n\t\t\tif (!currentDocId) {\n\t\t\t\tdocType = document.getElementById(\"docEdit\").elements.namedItem(\"Type\").value;\n\t\t\t\tif (docType === \"\") {\n\t\t\t\t\tif (typeof(toastr) !== 'undefined') {\n\t\t\t\t\t\ttoastr.error('I will not generate anything because you have not chosen yet the doc type');\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Meteor.Error( 112, 'I will not generate anything because you have not chosen yet the doc type' );\n\t\t\t\t}\n\n\t\t\t\tYear = document.getElementById(\"docEdit\").elements.namedItem(\"Year\").value;\n\t\t\t\tcategoryId = Categories.findOne({name: \"ENG\"})._id;\n\t\t\t\tDocInThisCategory = Docs.find({categoryId: categoryId}).fetch();\n\n\n\t\t\t\tarrayLength = DocInThisCategory.length;\n\t\t\t\tRKCore.log(\"You have \" + arrayLength + \" documents in the ENG category\");\n\n\t\t\t\tif (arrayLength === 0) {\n\t\t\t\t\tnewNumber = Year + \"001\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tfor (i = 0; i < arrayLength; i++) {\n\t\t\t\t\t\tRKCore.log(DocInThisCategory[i].fields[idFieldName]);\n\t\t\t\t\t\tif (typeof(DocInThisCategory[i].fields[idFieldName]) !== 'undefined') {\n\t\t\t\t\t\t\tdocId = DocInThisCategory[i].fields[idFieldName].value;\n\t\t\t\t\t\t\t//Remove the first 2 caracteres that are doc type :\n\t\t\t\t\t\t\tIdSubstring = docId.substring(2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tIdSubstring = Year + \"000\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastCharactersOfDocId.push(IdSubstring);\n\t\t\t\t\t}\n\t\t\t\t\tmax = Math.max.apply(null, lastCharactersOfDocId);\n\t\t\t\t\tnewNumber = max + 1;\n\t\t\t\t}\n\t\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([idFieldName]).value = docType + newNumber;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (typeof(toastr) !== 'undefined') {\n\t\t\t\t\ttoastr.error('I will not generate anything because you have something in this field, please erase before.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tChooseFromList: function () {\n\t\tvar docTypeFieldName = \"Type\";\n\t\tvar divHelperForType;\n\t\tvar a;\n\t\tvar linkText;\n\t\t//remove the class so it is not clickable anymore :\n\t\tdocument.getElementById(\"ChooseFromList\").className = \"\";\n\t\tdivHelperForType = document.getElementById(\"helperForType\");\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Instruction (IN) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\t//a.dataset.whattoadd = \"IN\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"IN\";\n\t\t};\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Test Report (TR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"TR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Base de donnÃ©e (DB) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"DB\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Calculation Report (CR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"CR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Analysis Report (AR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"AR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Qualification Report (QR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"QR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Notes Report (NR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function(e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"NR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\tdivHelperForType.appendChild(a);\n\t\ta = document.createElement('a');\n\t\tlinkText = document.createTextNode(\" Other Report (OR) \");\n\t\ta.appendChild(linkText);\n\t\ta.title = \"Click me\";\n\t\ta.class = \"addAType\";\n\t\ta.href = \"#\";\n\t\ta.onclick = function (e) {\n\t\t\te.preventDefault();\n\t\t\tdocument.getElementById(\"docEdit\").elements.namedItem([docTypeFieldName]).value = \"OR\";\n\t\t};\n\t\tdivHelperForType.appendChild(a);\n\n\t\treturn false;\n\t},\n});\n","var _ = Package.underscore._,\n    package_name = \"jesa:fieldtypes\",\n    namespace = \"jesa:fieldtypes\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"invitation_to_join_info_login\":\"Your username will be your company email.\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\nvar package_templates = _.difference(_.keys(Template), non_package_templates);\n\nfor (var i = 0; i < package_templates.length; i++) {\n  var package_template = package_templates[i];\n\n  registerI18nTemplate(package_template);\n}\n","var _ = Package.underscore._,\n    package_name = \"jesa:fieldtypes\",\n    namespace = \"jesa:fieldtypes\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n"]}